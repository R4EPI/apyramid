---
title: 'Age Pyramids in R'
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  fig.width = 12,
  out.width = "100%"
)
```

# apyramid

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/apyramid)](https://CRAN.R-project.org/package=apyramid)
[![Travis build status](https://travis-ci.org/R4EPI/apyramid.svg?branch=master)](https://travis-ci.org/R4EPI/apyramid)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/R4EPI/apyramid?branch=master&svg=true)](https://ci.appveyor.com/project/R4EPI/apyramid)
[![Codecov test coverage](https://codecov.io/gh/R4EPI/apyramid/branch/master/graph/badge.svg)](https://codecov.io/gh/R4EPI/apyramid?branch=master)
<!-- badges: end -->

The goal of apyramid is to ...

## Installation

You can install the released version of apyramid from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("apyramid")
```

## Example

This can be used to visualize pre-aggregated data. This example is the US 
census data from 2018:

```{r us2018}
library(apyramid)
library(ggplot2)
old_theme <- theme_set(theme_classic(base_size = 18))

us_labels <- labs(x = "Age group", y = "Thousands of people")
data(us_2018)
us_2018
p <- age_pyramid(us_2018, age_group = age, split_by = gender, count = count)
p + us_labels
```

You can also use another factor to split the data:

```{r us2018_factor}
data(us_ins_2018) # stratified by gender and health insurance status
data(us_gen_2018) # stratified by gender and generational status
p_ins <- age_pyramid(us_ins_2018, age_group = age, split_by = gender, stack_by = insured, count = count)
p_gen <- age_pyramid(us_gen_2018, age_group = age, split_by = gender, stack_by = generation, count = count)
p_ins + us_labels
p_gen + us_labels

theme_set(old_theme)
```


